(()=>{var W={};try{W.WeakMap=WeakMap}catch(t){W.WeakMap=function(e,r){"use strict";var n=r.defineProperty,s=r.hasOwnProperty,a=o.prototype;return a.delete=function(i){return this.has(i)&&delete i[this._]},a.get=function(i){return this.has(i)?i[this._]:void 0},a.has=function(i){return s.call(i,this._)},a.set=function(i,c){return n(i,this._,{configurable:!0,value:c}),this},o;function o(i){n(this,"_",{value:"_@ungap/weakmap"+e++}),i&&i.forEach(f,this)}function f(i){this.set(i[0],i[1])}}(Math.random(),Object)}var k=W.WeakMap;var g="-"+Math.random().toFixed(6)+"%",j=!1;try{(function(t,e,r){return e in t&&(t.innerHTML="<p "+r+'="'+g+'"></p>',t[e].childNodes[0].getAttribute(r)==g)})(document.createElement("template"),"content","tabindex")||(g="_dt: "+g.slice(1,-1)+";",j=!0)}catch(t){}var S="<!--"+g+"-->",V=8,tt=1,et=3,F=/^(?:style|textarea)$/i,rt=/^(?:area|base|br|col|embed|hr|img|input|keygen|link|menuitem|meta|param|source|track|wbr)$/i;function q(t){return t.join(S).replace(Ut,Rt).replace(Pt,zt)}var I=" \\f\\n\\r\\t",nt="[^"+I+`\\/>"'=]+`,B="["+I+"]+"+nt,ot="<([A-Za-z]+[A-Za-z0-9:._-]*)((?:",it=`(?:\\s*=\\s*(?:'[^']*?'|"[^"]*?"|<[^>]*?>|`+nt.replace("\\/","")+"))?)",Pt=new RegExp(ot+B+it+"+)(["+I+"]*/?>)","g"),Ut=new RegExp(ot+B+it+"*)(["+I+"]*/>)","g"),Ht=new RegExp("("+B+`\\s*=\\s*)(['"]?)`+S+"\\2","gi");function zt(t,e,r,n){return"<"+e+r.replace(Ht,Wt)+n}function Wt(t,e,r){return e+(r||'"')+g+(r||'"')}function Rt(t,e,r){return rt.test(e)?t:"<"+e+r+"></"+e+">"}var{isArray:d}=Array,{indexOf:be,slice:x}=[],M=t=>({get:e=>t.get(e),set:(e,r)=>(t.set(e,r),r)}),Ft=1,st=111,qt=({firstChild:t,lastChild:e})=>{let r=document.createRange();return r.setStartAfter(t),r.setEndAfter(e),r.deleteContents(),t},b=(t,e)=>t.nodeType===st?1/e<0?e?qt(t):t.lastChild:e?t.valueOf():t.firstChild:t,at=t=>{let{childNodes:e}=t,{length:r}=e;if(r<2)return r?e[0]:t;let n=x.call(e,0),s=n[0],a=n[r-1];return{ELEMENT_NODE:Ft,nodeType:st,firstChild:s,lastChild:a,valueOf(){if(e.length!==r){let o=0;for(;o<r;)t.appendChild(n[o++])}return t}}};var Bt=function(t){"use strict";var e="fragment",r="template",n="content"in o(r),s=n?function(i){var c=o(r);return c.innerHTML=i,c.content}:function(i){var c=o(e),l=o(r),u=null;if(/^[^\S]*?<(col(?:group)?|t(?:head|body|foot|r|d|h))/i.test(i)){var p=RegExp.$1;l.innerHTML="<table>"+i+"</table>",u=l.querySelectorAll(p)}else l.innerHTML=i,u=l.childNodes;return a(c,u),c};return function(c,l){return(l==="svg"?f:s)(c)};function a(i,c){for(var l=c.length;l--;)i.appendChild(c[0])}function o(i){return i===e?t.createDocumentFragment():t.createElementNS("http://www.w3.org/1999/xhtml",i)}function f(i){var c=o(e),l=o("div");return l.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+i+"</svg>",a(c,l.firstChild.childNodes),c}}(document),P=Bt,E=(t,e,r,n,s)=>{let a=r.length,o=e.length,f=a,i=0,c=0,l=null;for(;i<o||c<f;)if(o===i){let u=f<a?c?n(r[c-1],-0).nextSibling:n(r[f-c],0):s;for(;c<f;)t.insertBefore(n(r[c++],1),u)}else if(f===c)for(;i<o;)(!l||!l.has(e[i]))&&t.removeChild(n(e[i],-1)),i++;else if(e[i]===r[c])i++,c++;else if(e[o-1]===r[f-1])o--,f--;else if(e[i]===r[f-1]&&r[c]===e[o-1]){let u=n(e[--o],-1).nextSibling;t.insertBefore(n(r[c++],1),n(e[i++],-1).nextSibling),t.insertBefore(n(r[--f],1),u),e[o]=r[f]}else{if(!l){l=new Map;let u=c;for(;u<f;)l.set(r[u],u++)}if(l.has(e[i])){let u=l.get(e[i]);if(c<u&&u<f){let p=i,h=1;for(;++p<o&&p<f&&l.get(e[p])===u+h;)h++;if(h>u-c){let m=n(e[i],0);for(;c<u;)t.insertBefore(n(r[c++],1),m)}else t.replaceChild(n(r[c++],1),n(e[i++],-1))}else i++}else t.removeChild(n(e[i++],-1))}return r};var Jt=function(t,e,r,n,s){var a=s in t,o=t.createDocumentFragment();o[e](t[n]("g")),o[e](t[n](""));var f=a?t[s](o,!0):o[r](!0);return f.childNodes.length<2?function i(c,l){for(var u=c[r](),p=c.childNodes||[],h=p.length,m=0;l&&m<h;m++)u[e](i(p[m],l));return u}:a?t[s]:function(i,c){return i[r](!!c)}}(document,"appendChild","cloneNode","createTextNode","importNode"),ft=Jt,Xt="".trim||function(){return String(this).replace(/^\s+|\s+/g,"")},U=Xt,Zt=j?function(t,e){var r=e.join(" ");return e.slice.call(t,0).sort(function(n,s){return r.indexOf(n.name)<=r.indexOf(s.name)?-1:1})}:function(t,e){return e.slice.call(t,0)};function ct(t,e){for(var r=e.length,n=0;n<r;)t=t.childNodes[e[n++]];return t}function J(t,e,r,n){for(var s=t.childNodes,a=s.length,o=0;o<a;){var f=s[o];switch(f.nodeType){case tt:var i=n.concat(o);Gt(f,e,r,i),J(f,e,r,i);break;case V:var c=f.textContent;if(c===g)r.shift(),e.push(F.test(t.nodeName)?lt(t,n):Kt(f,n.concat(o)));else switch(c.slice(0,2)){case"/*":if(c.slice(-2)!=="*/")break;case"\u{1F47B}":t.removeChild(f),o--,a--}break;case et:F.test(t.nodeName)&&U.call(f.textContent)===S&&(r.shift(),e.push(lt(t,n)));break}o++}}function Gt(t,e,r,n){for(var s=t.attributes,a=[],o=[],f=Zt(s,r),i=f.length,c=0;c<i;){var l=f[c++],u=l.value===g,p;if(u||1<(p=l.value.split(S)).length){var h=l.name;if(a.indexOf(h)<0){a.push(h);var m=r.shift().replace(u?/^(?:|[\S\s]*?\s)(\S+?)\s*=\s*('|")?$/:new RegExp("^(?:|[\\S\\s]*?\\s)("+h+`)\\s*=\\s*('|")[\\S\\s]*`,"i"),"$1"),N=s[m]||s[m.toLowerCase()];if(u)e.push(ut(N,n,m,null));else{for(var C=p.length-2;C--;)r.shift();e.push(ut(N,n,m,p))}}o.push(l)}}i=o.length,c=0;for(var $=0<i&&j&&!("ownerSVGElement"in t);c<i;){var y=o[c++];$&&(y.value=""),t.removeAttribute(y.name)}var T=t.nodeName;if(/^script$/i.test(T)){var _=document.createElement(T);for(i=s.length,c=0;c<i;)_.setAttributeNode(s[c++].cloneNode(!0));_.textContent=t.textContent,t.parentNode.replaceChild(_,t)}}function Kt(t,e){return{type:"any",node:t,path:e}}function ut(t,e,r,n){return{type:"attr",node:t,path:e,name:r,sparse:n}}function lt(t,e){return{type:"text",node:t,path:e}}var pt=Qt,mt=M(new k);function Yt(t,e){var r=(t.convert||q)(e),n=t.transform;n&&(r=n(r));var s=P(r,t.type);ht(s);var a=[];return J(s,a,e.slice(0),[]),{content:s,updates:function(o){for(var f=[],i=a.length,c=0,l=0;c<i;){var u=a[c++],p=ct(o,u.path);switch(u.type){case"any":f.push({fn:t.any(p,[]),sparse:!1});break;case"attr":var h=u.sparse,m=t.attribute(p,u.name,u.node);h===null?f.push({fn:m,sparse:!1}):(l+=h.length-2,f.push({fn:m,sparse:!0,values:h}));break;case"text":f.push({fn:t.text(p),sparse:!1}),p.textContent="";break}}return i+=l,function(){var N=arguments.length;if(i!==N-1)throw new Error(N-1+" values instead of "+i+`
`+e.join("${value}"));for(var C=1,$=1;C<N;){var y=f[C-$];if(y.sparse){var T=y.values,_=T[0],Q=1,Y=T.length;for($+=Y-2;Q<Y;)_+=arguments[C++]+T[Q++];y.fn(_)}else y.fn(arguments[C++])}return o}}}}function Vt(t,e){var r=mt.get(e)||mt.set(e,Yt(t,e));return r.updates(ft.call(document,r.content,!0))}var te=[];function Qt(t){var e=te,r=ht;return function(n){return e!==n&&(r=Vt(t,e=n)),r.apply(null,arguments)}}function ht(t){for(var e=t.childNodes,r=e.length;r--;){var n=e[r];n.nodeType!==1&&U.call(n.textContent).length===0&&t.removeChild(n)}}var ee=function(){"use strict";var t=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,e=/([^A-Z])([A-Z]+)/g;return function(f,i){return"ownerSVGElement"in f?n(f,i):a(f.style,!1)};function r(o,f,i){return f+"-"+i.toLowerCase()}function n(o,f){var i;return f?i=f.cloneNode(!0):(o.setAttribute("style","--hyper:style;"),i=o.getAttributeNode("style")),i.value="",o.setAttributeNode(i),a(i,!0)}function s(o){var f,i=[];for(f in o)i.push(f.replace(e,r),":",o[f],";");return i.join("")}function a(o,f){var i,c;return function(l){var u,p,h,m;switch(typeof l){case"object":if(l){if(i==="object"){if(!f&&c!==l)for(p in c)p in l||(o[p]="")}else f?o.value="":o.cssText="";u=f?{}:o;for(p in l)m=l[p],h=typeof m=="number"&&!t.test(p)?m+"px":m,!f&&/^--/.test(p)?u.setProperty(p,h):u[p]=h;i="object",f?o.value=s(c=u):c=l;break}default:c!=l&&(i="string",c=l,f?o.value=l||"":o.cssText=l||"");break}}}}(),vt=ee,gt=t=>e=>{for(let r in e){let n=r==="role"?r:`aria-${r}`,s=e[r];s==null?t.removeAttribute(n):t.setAttribute(n,s)}},X=(t,e)=>{let r,n=!0,s=document.createAttributeNS(null,e);return a=>{r!==a&&(r=a,r==null?n||(t.removeAttributeNode(s),n=!0):(s.value=a,n&&(t.setAttributeNodeNS(s),n=!1)))}},yt=({dataset:t})=>e=>{for(let r in e){let n=e[r];n==null?delete t[r]:t[r]=n}},dt=(t,e)=>{let r,n=e.slice(2);return!(e in t)&&e.toLowerCase()in t&&(n=n.toLowerCase()),s=>{let a=d(s)?s:[s,!1];r!==a[0]&&(r&&t.removeEventListener(n,r,a[1]),(r=a[0])&&t.addEventListener(n,r,a[1]))}},xt=t=>e=>{typeof e=="function"?e(t):e.current=t},Z=(t,e)=>r=>{t[e]=r},re=(t,e)=>{let r;return n=>{r!==n&&(r=n,t[e]!==n&&(n==null?(t[e]="",t.removeAttribute(e)):t[e]=n))}},ne=/^(?:form|list)$/i,oe=(t,e)=>t.ownerDocument.createTextNode(e);function z(t){return this.type=t,pt(this)}z.prototype={attribute(t,e,r){let n=this.type==="svg";switch(e){case"class":if(n)return X(t,e,n);e="className";case"props":return Z(t,e);case"aria":return gt(t);case"style":return vt(t,r,n);case"ref":return xt(t);case".dataset":return yt(t);default:return e.slice(0,1)==="."?Z(t,e.slice(1)):e.slice(0,2)==="on"?dt(t,e):e in t&&!(n||ne.test(e))?re(t,e):X(t,e,n)}},any(t,e){let{type:r}=this,n=!1,s,a=o=>{switch(typeof o){case"string":case"number":case"boolean":n?s!==o&&(s=o,e[0].textContent=o):(n=!0,s=o,e=E(t.parentNode,e,[oe(t,o)],b,t));break;case"function":a(o(t));break;case"object":case"undefined":if(o==null){n=!1,e=E(t.parentNode,e,[],b,t);break}default:if(n=!1,s=o,d(o))if(o.length===0)e.length&&(e=E(t.parentNode,e,[],b,t));else switch(typeof o[0]){case"string":case"number":case"boolean":a(String(o));break;case"function":a(o.map(ie,t));break;case"object":d(o[0])&&(o=o.concat.apply([],o));default:e=E(t.parentNode,e,o,b,t);break}else"ELEMENT_NODE"in o?e=E(t.parentNode,e,o.nodeType===11?x.call(o.childNodes):[o],b,t):"text"in o?a(String(o.text)):"any"in o?a(o.any):"html"in o?e=E(t.parentNode,e,x.call(P([].concat(o.html).join(""),r).childNodes),b,t):"length"in o&&a(x.call(o));break}};return a},text(t){let e,r=n=>{if(e!==n){e=n;let s=typeof n;s==="object"&&n?"text"in n?r(String(n.text)):"any"in n?r(n.any):"html"in n?r([].concat(n.html).join("")):"length"in n&&r(x.call(n).join("")):s==="function"?r(n(t)):t.textContent=n??""}};return r}};function ie(t){return t(this)}var{create:se,freeze:ae,keys:nr}=Object,or=z.prototype,bt=M(new k),fe=t=>({html:Et("html",t),svg:Et("svg",t),render(e,r){let n=typeof r=="function"?r():r,s=bt.get(e)||bt.set(e,D()),a=n instanceof H?R(t,s,n):n;return a!==s.wire&&(s.wire=a,e.textContent="",e.appendChild(a.valueOf())),e}}),D=()=>({stack:[],entry:null,wire:null}),Et=(t,e)=>{let r=M(new k),n=a=>function(){return R(e,a,s.apply(null,arguments))};return s.for=(a,o)=>{let f=r.get(a)||r.set(a,se(null));return f[o]||(f[o]=n(D()))},s.node=function(){return R(e,D(),s.apply(null,arguments)).valueOf()},s;function s(){return new H(t,ce.apply(null,arguments))}},R=(t,e,{type:r,template:n,values:s})=>{let{length:a}=s;wt(t,e,s,a);let{entry:o}=e;if(!o||o.template!==n||o.type!==r){let f=new t(r);e.entry=o={type:r,template:n,tag:f,wire:at(f(n,...s))}}else o.tag(n,...s);return o.wire},wt=(t,{stack:e},r,n)=>{for(let s=0;s<n;s++){let a=r[s];a instanceof le?r[s]=R(t,e[s]||(e[s]=D()),a):d(a)?wt(t,e[s]||(e[s]=D()),a,a.length):e[s]=null}n<e.length&&e.splice(n)};ae(H);function H(t,e){this.type=t,this.template=e.shift(),this.values=e}var le=H,{render:Nt,html:v,svg:ir}=fe(z);function ce(){let t=[],e=0,{length:r}=arguments;for(;e<r;)t.push(arguments[e++]);return t}var w=[],G,Ct=2;async function Tt(t,e,r){r&&(Ct=r),G=e;let n=await ue(t);Object.freeze(n),w.push(n),G(w[0])}async function A(t){let e={...w[w.length-1]};await t(e),Object.freeze(e),G(e),w.push(e),w.length>Ct&&w.shift()}function _t(t,e,r){let n=Date.now().toString(36),s=e+"."+n;t[e].push(s),t[s]=r}function St(t,e){let r=pe(e),n=t[r].indexOf(e);delete t[e],t[r].splice(n,1)}function pe(t){return t.split(".").slice(0,-1).join(".")}function At(t){return new Promise((e,r)=>{try{if(Object(t)!==t||Array.isArray(t))return t;var n={},s,a,o,f,i;for(var c in t){let l=[];if(Array.isArray(t[c]))for(let u=0;u<t[c].length;u++)l.push(t[u]);else{s=n,a="",f=0;do o=c.indexOf(".",f),i=c.substring(f,o!==-1?o:void 0),s=s[a]||(s[a]=isNaN(parseInt(i))?{}:[]),a=i,f=o+1;while(o>=0);l.length>0?s[a]=l:s[a]=t[c]}}e(n[""])}catch(l){r(l)}})}function ue(t){return new Promise((e,r)=>{try{var n={};function s(a,o){if(Object(a)!==a)n[o]=a;else if(Array.isArray(a)){let u=[];for(var f=0,i=a.length;f<i;f++){let p=o?o+"."+f:""+f;u.push(p),s(a[f],p)}n[o]=u}else{var c=!0;for(var l in a)c=!1,s(a[l],o?o+"."+l:l);c&&(n[o]={})}}s(t,""),e(n)}catch(a){r(a)}})}var O={count:"counter.count",todoList:"todo.list"};function Ot(t){(!t||typeof t!==Number)&&(t=1),A(async e=>{e[O.count]+=t})}function kt(t){(!t||typeof t!==Number)&&(t=1),A(async e=>{e[O.count]-=t})}var L=function(e,r){return v`
        <button onclick=${r}>${e}</button>
    `},Mt=function(e){return v`
        <div>${e}</div>
        <div>${L("Add 1",Ot)} | ${L("Subtract 1",kt)}</div>
    `};function Dt(t,e,r){return v`
        <ul>
            ${t[e].map((n,s)=>v`<li data-i=${n} onclick=${()=>{r(n,e)}}>${t[n]}</li>`)}
        </ul>
    `}function Lt(t){t===void 0&&console.error("removeTodo requires an index"),A(async e=>{St(e,t)})}function K(t,e){t===void 0&&console.error("addTodo requires a value"),A(async r=>{_t(r,e,t)})}function $t(t,e){function r(n){if(!t)return;n.keyCode===13&&t(n.target.value,e)}return v`
        <input onkeydown=${r} type="text">
    `}function jt(t,e){return v`
        ${Dt(t,e,Lt)}
        <div>
            ${$t(K,e)} |
            ${L("Add Todo",r=>{K(r.target.parentNode.querySelector("input").value,e)})}
        </div>
    `}var me=document.querySelector("main");async function It(t){let e=await At(t);Nt(me,v`
        <h1>State Simplifier u_store</h2>
        <p>This library flattens JSON to make it easier and safer to work with immutable state. This is a very simple (less than 1kb gzipped) library for flattening and then managing that flattened stated. The only part of the JSON object that isn't flat are arrays that have the keys to the former array values.</p>
        <h2>Counter</h2>
        ${Mt(t[O.count])}
        <h2>Todo</h2>
        ${jt(t,O.todoList)}
        <h2>Flattened State</h2>
        <pre>${JSON.stringify(t,null,"	")}</pre>
        <h2>Unflattened State</h2>
        <pre>${JSON.stringify(e,null,"	")}</pre>
    `)}var he={counter:{count:0},todo:{list:["get groceries","run","walk cats"],allLists:[{list1:["--1","--2",3]},{list2:[4,6,7]},{list3:[8,9,10]}]}};Tt(he,It);})();
/*! (c) Andrea Giammarchi - ISC */
